'use strict';(function(f){function z(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new e("Invalid character in header field name");return a.toLowerCase()}function L(a){"string"!==typeof a&&(a=String(a));var b;var h=0;for(b=a.length;h<b;h++){var c=a.charCodeAt(h);if(9!==c&&10!==c&&13!==c&&32!==c)break}for(b=a.length-1;b>h&&(c=a.charCodeAt(b),9===c||10===c||13===c||32===c);b--);a=a.substring(h,b+1);h=0;for(b=a.length;h<b;h++)if(c=a.charCodeAt(h),256<=c||0===c||
10===c||13===c)throw new e("Invalid character in header field value");return a}function d(a){this[k]=new C;if(void 0!==a){if(null===a||"object"!==typeof a)throw new e("Constructing Headers with invalid parameters");a instanceof d?a.forEach(function(a,h){this.append(h,a)},this):A.isArray(a)?a.forEach(function(a){if(2!==a.length)throw new e("Constructing Headers with invalid parameters");this.append(a[0],a[1])},this):Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}}function F(a){if(a.bodyUsed)return G(new e("Body was already read"));
if(null===a.body)return S(new r(0));if(T(a.body))return G(new e("ReadableStream was already locked"));var b=a.body.getReader(),h=[],c=0;return b.read().then(function U(a){if(a.done){if(0===h.length)a=new r(0);else if(1===h.length)a=new r(h[0]);else{a=new r(c);for(var f=0,d=h.length,M=0;f<d;f++)a.set(h[f],M),M+=h[f].length}return a}return a.value instanceof r?(c+=a.value.length,h.push(a.value),b.read().then(U)):G(new e("Invalid stream data type"))})}function N(){this._initBody=function(a){this[H]=
!1;this[l]=null===a||void 0===a?null:a instanceof I?a:new I({start:function(b){if(a)if("string"===typeof a)b.enqueue(FetchInternal.encodeToUTF8(a));else if(O.prototype.isPrototypeOf(a))b.enqueue(new r(a));else if(V(a))b.enqueue(new r(a.buffer));else throw new e("Unsupported BodyInit type");b.close()}});this[m].get("content-type")||"string"===typeof a&&this[m].set("content-type","text/plain;charset=UTF-8")};J(this,{body:{get:function(){return this[l]}},bodyUsed:{get:function(){return this[H]?!0:this[l]?
!!W(this[l]):!1}}});this.arrayBuffer=function(){return F(this).then(function(a){return a.buffer})};this.text=function(){return F(this).then(function(a){return FetchInternal.decodeFromUTF8(a)})};this.json=function(){return this.text().then(JSON.parse)};return this}function t(a,b){var h=void 0!==b&&null!==b&&void 0===b.cloneBody;b=b||{};var c=b.body||b.cloneBody;if(a instanceof t){if(a.bodyUsed)throw new e("Request body was already read");this[u]=a.url;this[w]=a.cache;this[x]=a.credentials;b.headers||
(this[m]=new d(a.headers));this[y]=a.integrity;this[v]=a.method;this[p]=a.mode;h&&"navigate"===this[p]&&(this[p]="same-origin");this[B]=a.redirect;c||null===a.body||(c=a.body,a[H]=!0)}else{this[u]=String(a);if(!FetchInternal.isUrlValid(this[u],!1))throw new e("Invalid request URL");this[p]="cors";this[x]="omit"}if(void 0!==b.window&&null!==b.window)throw new e("Invalid request window");this[w]=b.cache||this[w]||"default";if(-1===X.indexOf(this[w]))throw new e("Invalid request cache mode");this[x]=
b.credentials||this[x]||"omit";if(-1===Y.indexOf(this[x]))throw new e("Invalid request credentials");if(b.headers||!this[m])this[m]=new d(b.headers);void 0!==b.integrity?this[y]=b.integrity:void 0===this[y]&&(this[y]="");a=(b.method||this[v]||"GET").toUpperCase();if(-1===Z.indexOf(a))throw new e("Invalid request method");this[v]=a;if(b.mode&&-1===aa.indexOf(b.mode))throw new e("Invalid request mode");this[p]=b.mode||this[p]||"no-cors";if("no-cors"===this[p]){if(-1===ba.indexOf(this[v]))throw new e("Invalid request method for no-cors");
if(""!==this[y])throw new e("Request integrity data is not allowed with no-cors");}if("same-origin"!==this[p]&&"only-if-cached"===this[w])throw new e("Request mode must be same-origin for only-if-cached");this[B]=b.redirect||this[B]||"follow";if(-1===ca.indexOf(this[B]))throw new e("Invalid request redirect mode");if(("GET"===this[v]||"HEAD"===this[v])&&c)throw new e("Request body is not allowed for GET or HEAD");this._initBody(c)}function da(a){var b=new d;a.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(a){var c=
a.split(":");if(a=c.shift().trim())c=c.join(":").trim(),b.append(a,c)});return b}function n(a,b){b||(b={});this[D]="default";this[q]="status"in b?b.status:200;if(200>this[q]||599<this[q])throw new P("Invalid response status");this[Q]=200<=this[q]&&300>this[q];if("statusText"in b){var h=b.statusText;for(var c=0,f=h.length,g;c<f;c++)if(g=h.charCodeAt(c),9!==g&&(32>g||255<g||127===g))throw e("Invalid response status text");}else h="OK";this[E]=h;this[m]=new d(b.headers);this[u]=b.url||"";if(a&&-1<ea.indexOf(this[q]))throw new e("Response body is not allowed with a null body status");
this._initBody(a)}if(!f.fetch){var A=f.Array,O=f.ArrayBuffer,J=f.Object.defineProperties,g=f.Symbol,fa=g.iterator,C=f.Map,P=f.RangeError,e=f.TypeError,r=f.Uint8Array,K=f.Promise,G=K.reject,S=K.resolve,I=f.ReadableStream,R=f.ReadableStreamTee,W=f.IsReadableStreamDisturbed,T=f.IsReadableStreamLocked,l=g("body"),H=g("bodyUsed"),w=g("cache"),x=g("credentials"),m=g("headers"),y=g("integrity"),k=g("map"),v=g("method"),p=g("mode"),Q=g("ok"),B=g("redirect"),q=g("status"),E=g("statusText"),D=g("type"),u=g("url"),
X="default no-store reload no-cache force-cache only-if-cached".split(" "),Y=["omit","same-origin","include"],Z="DELETE GET HEAD OPTIONS POST PUT".split(" "),ba=["GET","HEAD","POST"],aa=["same-origin","no-cors","cors"],ca=["follow","error","manual"],ea=[101,204,205,304],ga=[301,302,303,307,308],ha="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";"),
V=O.isView||function(a){return a&&-1<ha.indexOf(Object.prototype.toString.call(a))};d.prototype.append=function(a,b){if(2!==arguments.length)throw e("Invalid parameters to append");a=z(a);b=L(b);this[k].has(a)?this[k].set(a,this[k].get(a)+", "+b):this[k].set(a,b)};d.prototype["delete"]=function(a){if(1!==arguments.length)throw e("Invalid parameters to delete");this[k].delete(z(a))};d.prototype.get=function(a){if(1!==arguments.length)throw e("Invalid parameters to get");a=z(a);var b=this[k].get(a);
return void 0!==b?b:null};d.prototype.has=function(a){if(1!==arguments.length)throw e("Invalid parameters to has");return this[k].has(z(a))};d.prototype.set=function(a,b){if(2!==arguments.length)throw e("Invalid parameters to set");this[k].set(z(a),L(b))};d.prototype.forEach=function(a,b){var e=this;A.from(this[k].entries()).sort().forEach(function(c){a.call(b,c[1],c[0],e)})};d.prototype.keys=function(){return(new C(A.from(this[k].entries()).sort())).keys()};d.prototype.values=function(){return(new C(A.from(this[k].entries()).sort())).values()};
d.prototype.entries=function(){return(new C(A.from(this[k].entries()).sort())).entries()};d.prototype[fa]=d.prototype.entries;t.prototype.clone=function(){var a=null;null!==this[l]&&(a=R(this[l],!0),this[l]=a[0],a=a[1]);return new t(this,{cloneBody:a})};J(t.prototype,{cache:{get:function(){return this[w]}},credentials:{get:function(){return this[x]}},headers:{get:function(){return this[m]}},integrity:{get:function(){return this[y]}},method:{get:function(){return this[v]}},mode:{get:function(){return this[p]}},
redirect:{get:function(){return this[B]}},url:{get:function(){return this[u]}}});N.call(t.prototype);N.call(n.prototype);n.prototype.clone=function(){var a=null;null!==this[l]&&(a=R(this[l],!0),this[l]=a[0],a=a[1]);return new n(a,{status:this[q],statusText:this[E],headers:new d(this[m]),url:this[u]})};J(n.prototype,{headers:{get:function(){return this[m]}},ok:{get:function(){return this[Q]}},status:{get:function(){return this[q]}},statusText:{get:function(){return this[E]}},type:{get:function(){return this[D]}},
url:{get:function(){return this[u]}}});n.error=function(){var a=new n(null);a[D]="error";a[q]=0;a[E]="";return a};n.redirect=function(a,b){if(!FetchInternal.isUrlValid(a,!0))throw new e("Invalid URL for response redirect");void 0===b&&(b=302);if(-1===ga.indexOf(b))throw new P("Invalid status code for response redirect");return new n(null,{status:b,headers:{location:a}})};f.Headers=d;f.Request=t;f.Response=n;f.fetch=function(a,b){return new K(function(h,c){var f=!1,g=new t(a,b),d=new XMLHttpRequest,
k=null,l=new I({start:function(a){k=a},cancel:function(a){f=!0;d.abort()}});d.onload=function(){k.close()};d.onreadystatechange=function(){if(d.readyState===d.HEADERS_RECEIVED){var a={status:d.status,statusText:d.statusText,headers:da(d.getAllResponseHeaders()||"")};a.url="responseURL"in d?d.responseURL:a.headers.get("X-Request-URL");try{var b=new n(l,a);b[D]="basic";h(b)}catch(ia){c(ia)}}};d.onerror=function(){k.error(new e("Network request failed"));c(new e("Network request failed"))};d.ontimeout=
function(){k.error(new e("Network request failed"));c(new e("Network request failed"))};d.open(g.method,g.url,!0);"include"===g.credentials&&(d.withCredentials=!0);g.headers.forEach(function(a,b){d.setRequestHeader(b,a)});var m=function(a){f||k.enqueue(a)};null===g.body?d.fetch(m,null):F(g).then(function(a){d.fetch(m,a)})})};f.fetch.polyfill=!0}})(this);