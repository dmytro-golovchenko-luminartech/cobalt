{
  'variables': {
    'libvpx_source': '<(DEPTH)/third_party/libvpx',
  },
  'targets': [
    {
      'target_name': 'libvpx',
      'type': 'static_library',
      'include_dirs': [
        '<(libvpx_source)',
        # TODO: Make this build on platforms other than ps5.
        '<(libvpx_source)/platforms/ps5',
        '<(libvpx_source)/vpx_mem/memory_manager/include/',
      ],
      'direct_dependent_settings': {
        'include_dirs': [
          '<(libvpx_source)',
        ],
      },
      # TODO: Make this build on ps5 under our building environment.
      'includes': [ 'ads2gas.gypi', ],
      # Always optimize libvpx at O3.
      # Debug performance is too slow.
      'cflags': ['-O3'],
      'cflags!': ['-O0', '-O2'],
      'ldflags': ['--error-limit=0'],
      # This list was generated by running configure and then
      # make libvpx_srcs.txt
      'sources': [
        'platforms/ps5/vp9_rtcd.h',
        'platforms/ps5/vpx_config.asm',
        'platforms/ps5/vpx_config.c',
        'platforms/ps5/vpx_config.h',
        'platforms/ps5/vpx_dsp_rtcd.h',
        'platforms/ps5/vpx_scale_rtcd.h',
        'platforms/ps5/vpx_version.h',
        'vp9/common/x86/vp9_highbd_iht16x16_add_sse4.c',
        'vp9/common/x86/vp9_highbd_iht4x4_add_sse4.c',
        'vp9/common/x86/vp9_highbd_iht8x8_add_sse4.c',
        'vp9/common/x86/vp9_idct_intrin_sse2.c',
        'vpx_dsp/x86/add_noise_sse2.asm',
        'vpx_dsp/x86/avg_pred_sse2.c',
        'vpx_dsp/x86/bitdepth_conversion_sse2.h',
        'vpx_dsp/x86/convolve.h',
        'vpx_dsp/x86/convolve_sse2.h',
        'vpx_dsp/x86/convolve_ssse3.h',
        'vpx_dsp/x86/deblock_sse2.asm',
        'vpx_dsp/x86/highbd_idct16x16_add_sse2.c',
        'vpx_dsp/x86/highbd_idct16x16_add_sse4.c',
        'vpx_dsp/x86/highbd_idct32x32_add_sse2.c',
        'vpx_dsp/x86/highbd_idct32x32_add_sse4.c',
        'vpx_dsp/x86/highbd_idct4x4_add_sse2.c',
        'vpx_dsp/x86/highbd_idct4x4_add_sse4.c',
        'vpx_dsp/x86/highbd_idct8x8_add_sse2.c',
        'vpx_dsp/x86/highbd_idct8x8_add_sse4.c',
        'vpx_dsp/x86/highbd_intrapred_intrin_sse2.c',
        'vpx_dsp/x86/highbd_intrapred_intrin_ssse3.c',
        'vpx_dsp/x86/highbd_intrapred_sse2.asm',
        'vpx_dsp/x86/highbd_inv_txfm_sse2.h',
        'vpx_dsp/x86/highbd_inv_txfm_sse4.h',
        'vpx_dsp/x86/highbd_loopfilter_sse2.c',
        'vpx_dsp/x86/highbd_subpel_variance_impl_sse2.asm',
        'vpx_dsp/x86/highbd_variance_impl_sse2.asm',
        'vpx_dsp/x86/highbd_variance_sse2.c',
        'vpx_dsp/x86/intrapred_sse2.asm',
        'vpx_dsp/x86/intrapred_ssse3.asm',
        'vpx_dsp/x86/inv_txfm_sse2.c',
        'vpx_dsp/x86/inv_txfm_sse2.h',
        'vpx_dsp/x86/inv_txfm_ssse3.c',
        'vpx_dsp/x86/inv_txfm_ssse3.h',
        'vpx_dsp/x86/inv_wht_sse2.asm',
        'vpx_dsp/x86/loopfilter_sse2.c',
        'vpx_dsp/x86/mem_sse2.h',
        'vpx_dsp/x86/post_proc_sse2.c',
        'vpx_dsp/x86/ssim_opt_x86_64.asm',
        'vpx_dsp/x86/subpel_variance_sse2.asm',
        'vpx_dsp/x86/transpose_sse2.h',
        'vpx_dsp/x86/txfm_common_sse2.h',
        'vpx_dsp/x86/variance_sse2.c',
        'vpx_dsp/x86/vpx_convolve_copy_sse2.asm',
        'vpx_dsp/x86/vpx_high_subpixel_8t_sse2.asm',
        'vpx_dsp/x86/vpx_high_subpixel_bilinear_sse2.asm',
        'vpx_dsp/x86/vpx_subpixel_4t_intrin_sse2.c',
        'vpx_dsp/x86/vpx_subpixel_8t_intrin_ssse3.c',
        'vpx_dsp/x86/vpx_subpixel_8t_sse2.asm',
        'vpx_dsp/x86/vpx_subpixel_8t_ssse3.asm',
        'vpx_dsp/x86/vpx_subpixel_bilinear_sse2.asm',
        'vpx_dsp/x86/vpx_subpixel_bilinear_ssse3.asm',
        'vpx_ports/emms_mmx.asm',
        'vpx_ports/x86.h',
        'vpx_ports/x86_abi_support.asm',

        'vp9/common/vp9_alloccommon.c',
        'vp9/common/vp9_alloccommon.h',
        'vp9/common/vp9_blockd.c',
        'vp9/common/vp9_blockd.h',
        'vp9/common/vp9_common.h',
        'vp9/common/vp9_common_data.c',
        'vp9/common/vp9_common_data.h',
        'vp9/common/vp9_debugmodes.c',
        'vp9/common/vp9_entropy.c',
        'vp9/common/vp9_entropy.h',
        'vp9/common/vp9_entropymode.c',
        'vp9/common/vp9_entropymode.h',
        'vp9/common/vp9_entropymv.c',
        'vp9/common/vp9_entropymv.h',
        'vp9/common/vp9_enums.h',
        'vp9/common/vp9_filter.c',
        'vp9/common/vp9_filter.h',
        'vp9/common/vp9_frame_buffers.c',
        'vp9/common/vp9_frame_buffers.h',
        'vp9/common/vp9_idct.c',
        'vp9/common/vp9_idct.h',
        'vp9/common/vp9_loopfilter.c',
        'vp9/common/vp9_loopfilter.h',
        'vp9/common/vp9_mv.h',
        'vp9/common/vp9_mvref_common.c',
        'vp9/common/vp9_mvref_common.h',
        'vp9/common/vp9_onyxc_int.h',
        'vp9/common/vp9_ppflags.h',
        'vp9/common/vp9_pred_common.c',
        'vp9/common/vp9_pred_common.h',
        'vp9/common/vp9_quant_common.c',
        'vp9/common/vp9_quant_common.h',
        'vp9/common/vp9_reconinter.c',
        'vp9/common/vp9_reconinter.h',
        'vp9/common/vp9_reconintra.c',
        'vp9/common/vp9_reconintra.h',
        'vp9/common/vp9_rtcd.c',
        'vp9/common/vp9_scale.c',
        'vp9/common/vp9_scale.h',
        'vp9/common/vp9_scan.c',
        'vp9/common/vp9_scan.h',
        'vp9/common/vp9_seg_common.c',
        'vp9/common/vp9_seg_common.h',
        'vp9/common/vp9_thread_common.c',
        'vp9/common/vp9_thread_common.h',
        'vp9/common/vp9_tile_common.c',
        'vp9/common/vp9_tile_common.h',
        'vp9/decoder/vp9_decodeframe.c',
        'vp9/decoder/vp9_decodeframe.h',
        'vp9/decoder/vp9_decodemv.c',
        'vp9/decoder/vp9_decodemv.h',
        'vp9/decoder/vp9_decoder.c',
        'vp9/decoder/vp9_decoder.h',
        'vp9/decoder/vp9_detokenize.c',
        'vp9/decoder/vp9_detokenize.h',
        'vp9/decoder/vp9_dsubexp.c',
        'vp9/decoder/vp9_dsubexp.h',
        'vp9/decoder/vp9_job_queue.c',
        'vp9/decoder/vp9_job_queue.h',
        'vp9/vp9_dx_iface.c',
        'vp9/vp9_dx_iface.h',
        'vp9/vp9_iface_common.c',
        'vp9/vp9_iface_common.h',
        'vpx/internal/vpx_codec_internal.h',
        'vpx/src/vpx_codec.c',
        'vpx/src/vpx_decoder.c',
        'vpx/src/vpx_encoder.c',
        'vpx/src/vpx_image.c',
        'vpx/vp8.h',
        'vpx/vp8dx.h',
        'vpx/vpx_codec.h',
        'vpx/vpx_decoder.h',
        'vpx/vpx_encoder.h',
        'vpx/vpx_frame_buffer.h',
        'vpx/vpx_image.h',
        'vpx/vpx_integer.h',
        'vpx_dsp/add_noise.c',
        'vpx_dsp/bitreader.c',
        'vpx_dsp/bitreader.h',
        'vpx_dsp/bitreader_buffer.c',
        'vpx_dsp/bitreader_buffer.h',
        'vpx_dsp/deblock.c',
        'vpx_dsp/intrapred.c',
        'vpx_dsp/inv_txfm.c',
        'vpx_dsp/inv_txfm.h',
        'vpx_dsp/loopfilter.c',
        'vpx_dsp/postproc.h',
        'vpx_dsp/prob.c',
        'vpx_dsp/prob.h',
        'vpx_dsp/skin_detection.c',
        'vpx_dsp/skin_detection.h',
        'vpx_dsp/txfm_common.h',
        'vpx_dsp/vpx_convolve.c',
        'vpx_dsp/vpx_convolve.h',
        'vpx_dsp/vpx_dsp_common.h',
        'vpx_dsp/vpx_dsp_rtcd.c',
        'vpx_dsp/vpx_filter.h',
        'vpx_mem/include/vpx_mem_intrnl.h',
        'vpx_mem/vpx_mem.c',
        'vpx_mem/vpx_mem.h',
        'vpx_ports/bitops.h',
        'vpx_ports/compiler_attributes.h',
        'vpx_ports/emmintrin_compat.h',
        'vpx_ports/mem.h',
        'vpx_ports/mem_ops.h',
        'vpx_ports/mem_ops_aligned.h',
        'vpx_ports/msvc.h',
        'vpx_ports/static_assert.h',
        'vpx_ports/system_state.h',
        'vpx_ports/vpx_once.h',
        'vpx_ports/vpx_timer.h',
        'vpx_scale/generic/gen_scalers.c',
        'vpx_scale/generic/vpx_scale.c',
        'vpx_scale/generic/yv12config.c',
        'vpx_scale/generic/yv12extend.c',
        'vpx_scale/vpx_scale.h',
        'vpx_scale/vpx_scale_rtcd.c',
        'vpx_scale/yv12config.h',
        'vpx_util/endian_inl.h',
        'vpx_util/vpx_atomics.h',
        'vpx_util/vpx_thread.c',
        'vpx_util/vpx_thread.h',
        'vpx_util/vpx_timestamp.h',
        'vpx_util/vpx_util.mk',
        'vpx_util/vpx_write_yuv_frame.c',
        'vpx_util/vpx_write_yuv_frame.h',
      ],
    },
  ],
}
